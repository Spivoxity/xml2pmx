# runtime/Makefile.ac

## Config stuff:
PLATFLAGS = @PLATFLAGS@
EXEEXT = @EXEEXT@
## End of config

all: xml2pmx$(EXEEXT)

OBX = gc.o interp.o kickstart.o support.o xmain.o dynlink.o \
	Args.o Builtin.o Files.o primtab0.o wrapper.o

interp.o: action.c

xmain.o: CFLAGS += -DREVID=\"xml2pmx\" -Dmain=xmain

xml2pmx$(EXEEXT): $(OBX) image.o
	gcc $(CFLAGS) $(PLATFLAGS) $^ -o $@

%.o: %.c
	gcc $(CFLAGS) -c $< -o $@

CFLAGS = -std=c90 -Wall -pedantic -O2 -fno-strict-aliasing -I ..

update import pristine: force
	make -f Makefile.import $@

clean: force
	rm -f *.o xml2pmx$(EXEEXT)

realclean: clean

force:

###

$(OBX): config.h exec.h keiko.h obcommon.h obx.h ../platform.h
